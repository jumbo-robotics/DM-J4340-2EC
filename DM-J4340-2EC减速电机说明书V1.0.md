# DM-J4340-2EC减速电机说明书V1.0

*Converted from PDF - 9 pages*

---

## Page 1

DAMIAO | 达妙科技
减速电机
DM-J4340-2EC
使用说明书
V1.0 2024.03.14
日期 版本 变更内容
2024.03.14 V1.0 初版创建
第 1 页 共 9 页

---

### Table 1

| 日期 | 版本 | 变更内容 |
| 2024.03.14 | V1.0 | 初版创建 |

## Page 2

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
免责声明
感谢您购买达妙科技TMDAMIAOTMDM-J4340-2EC减速电机（以下简称“电机”）。在使
用本产品之前，请仔细阅读并遵循本文及达妙科技提供的所有安全指引，否则可能会给您和
周围的人带来伤害，损坏本产品或其他周围物品。一旦使用本产品，即视为您已经仔细阅读
本文档，理解、认可和接受本文档及本产品所有相关文档的全部条款和内容。您承诺仅出于
正当目的使用本产品。您承诺对使用本产品以及可能带来的后果负全部责任。达妙科技对于
直接或间接使用本产品而造成的损坏、伤害以及任何法律责任不予负责。
DAMIAO是深圳市达妙科技有限公司的商标。本文出现的产品名称、品牌等，均为其
所属公司的商标。本产品及手册为深圳市达妙科技有限公司版权所有。未经许可，不得以任
何形式复制翻印。本文档及本产品所有相关的文档最终解释权归深圳市达妙科技有限公司所
有。如有更新，恕不另行通知。
注意事项
1. 请严格按照规定的工作环境及绕组最大允许温度范围使用电机，否则会对产品造成
永久性不可逆转的损坏。
2. 避免杂物进入转子内部，否则会导致转子运行异常。
3. 使用前请检查各零部件是否完好。如有部件缺失、老化、损坏等，请停止使用。
4. 确保正确接线，电机安装正确、稳固。
5. 使用时勿触摸电子转子部分，避免意外发生。电机大扭矩输出时，会出现发热的情
况，请注意避免烫伤。
6. 用户请勿私自拆卸电机，否则会影响电机的控制精度，甚至会导致电机运行异常。
电机特色
1. 双编码器，输出轴单圈绝对位置，不惧掉电输出轴绝对位置丢失。
2. 电机和驱动器一体化设计，结构紧凑，集成度高。
3. 支持上位机可视化调试，支持固件升级。
4. 可通过CAN总线反馈电机速度、位置、转矩、电机温度等信息。
5. 具有双温度保护功能。
6. 位置模式下支持梯形加减速。
第 2 页 共 9 页

---

## Page 3

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
物品清单
1、电机（含驱动）×1
2、电源（含CAN通信端子）连接线：XT30(2+2)-F插头单端连接线（100mm）×1
3、调试串口信号线：GH1.25连接线-3pin（异面，300mm）×1
接口及线序说明
具体名称-序号 接口标注 说明
电源接口-1
1、通过XT30(2+2)-F插头的电源连
（含CAN通信端子）
接线连接电源，额定电压为24V，
为电机供电。
2、通过CAN通信端子连接外部控
制设备，可接收CAN控制命令，反
馈电机状态信息。
电源接口-2 3、电机包含两个电源接口，任一接
（含CAN通信端子） 口可单独连接使用，也可多机串联
使用，方便走线。
通过GH1.25连接线-3pin，使用USB
转CAN调试工具（或使用通用USB
调试串口-3 转串口模块）连接到PC，通过达妙
科技调试助手对电机进行参数设
置，以及固件升级等。
第 3 页 共 9 页

---

### Table 1

| 接口及线序说明 |  |  |
| 具体名称-序号 | 接口标注 | 说明 |
| 电源接口-1
（含CAN通信端子） |  | 1、通过XT30(2+2)-F插头的电源连
接线连接电源，额定电压为24V，
为电机供电。
2、通过CAN通信端子连接外部控
制设备，可接收CAN控制命令，反
馈电机状态信息。
3、电机包含两个电源接口，任一接
口可单独连接使用，也可多机串联
使用，方便走线。 |
| 电源接口-2
（含CAN通信端子） |  |  |
| 调试串口-3 |  | 通过GH1.25连接线-3pin，使用USB
转CAN调试工具（或使用通用USB
转串口模块）连接到PC，通过达妙
科技调试助手对电机进行参数设
置，以及固件升级等。 |

## Page 4

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
电机尺寸及安装
请参考电机安装孔尺寸和位置将电机安装到对应设备。
指示灯状态
绿灯常亮 ERR位为1，表示使能模式，正常工作状态
正常状态
红灯常亮 ERR位为0，表示失能模式
表示故障，对应故障类型为：
8——超压； 9——欠压；
A——过电流； B——MOS过温；
C——电机线圈过温； D——通讯丢失；
异常状态 红灯闪烁
E——过载；
可通过反馈帧，或通过达妙科技调试助手界面显示，
查看发生何种故障。
工作模式
 MIT 模式
MIT模式是为了兼容原版MIT模式所设计，可以在实现无缝切换的同时，能够灵活设
定控制范围（P_MAX,V_MAX，T_MAX），电调将接收到的CAN数据转化成控制变量进行
运算得到扭矩值作为电流环的电流给定，电流环根据其调节规律最终达到给定的扭矩电流。
其控制示意框图如下：
第 4 页 共 9 页

---

### Table 1

| 指示灯状态 |  |  |
| 正常状态 | 绿灯常亮 | ERR位为1，表示使能模式，正常工作状态 |
|  | 红灯常亮 | ERR位为0，表示失能模式 |
| 异常状态 | 红灯闪烁 | 表示故障，对应故障类型为：
8——超压； 9——欠压；
A——过电流； B——MOS过温；
C——电机线圈过温； D——通讯丢失；
E——过载；
可通过反馈帧，或通过达妙科技调试助手界面显示，
查看发生何种故障。 |

## Page 5

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
根据MIT模式可以衍生出多种控制模式，如kp=0,kd不为0时，给定v_des即可实现匀
速转动;kp=0,kd=0，给定t_ff即可实现给定扭矩输出。
注意：对位置进行控制时，kd不能赋0，否则会造成电机震荡，甚至失控。
 位置速度模式
位置串级模式是采用三环串联控制的模式，位置环作为最外环，其输出作为速度环的给
定，而速度环的输出作为内环电流环的给定，用以控制实际的电流输出，其控制示意框图见
下图：
p_des为控制的目标位置，v_des是用来限定运动过程中的最大绝对速度值。
位置串级模式如使用调试助手推荐的控制参数控制，可以达到较好的控制精度，控制过
程相对柔顺，但响应时间相对较长。可配置的相关参数除v_des外，另有加/减速度进行设
定，如控制过程中产生额外的震荡可提高加/减速度。
注意：p_des，v_des单位分别为rad和rad/s，数据类型为float，阻尼因子必须设置为
非0的正数，可参考速度模式的注意事项。
 速度模式
速度模式能让电机稳定运行在设定的速度，其控制示意框图如下：
第 5 页 共 9 页

---

## Page 6

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
注意：v_des单位为rad/s，数据类型为float，如需使用调试助手自动计算参数，则需要
设置阻尼因子为非0正数，通常情况下取值在2.0~10.0，过小的阻尼因子会带来速度的震荡
以及较大的过冲，过大的阻尼因子则会带来较长的上升时间，推荐的设定值为4.0。
使用
控制使用CAN标准帧格式，固定波特率为1Mbps，按功能可分为接收帧和反馈帧，接
收帧为接收到的控制数据，用于实现对电机的命令控制；反馈帧为电机向上层控制器发送电
机的状态数据。根据电机选定的不同模式，其接收帧帧格式定义以及帧ID各不相同，但各
种模式下的反馈帧是相同的。
 反馈帧
反馈帧ID由调试助手设置（MasterID），默认为0，主要反馈电机的位置，速度和扭矩
信息，其帧格式定义为：
反馈报文 D[0] D[1] D[2] D[3] D[4] D[5] D[6] D[7]
MST_ID ID|ERR<<4 POS[15:8] POS[7:0] VEL[11:4] VEL[3:0]|T[11:8] T[7:0] T_MOS T_Rotor
其中：
ID表示控制器的ID，取CAN_ID的低8位
ERR表示状态，对应状态类型为：
0——失能；
1——使能；
8——超压；
9——欠压；
A——过电流；
B——MOS过温；
C——电机线圈过温；
D——通讯丢失；
E——过载；
第 6 页 共 9 页

---

### Table 1

| 反馈报文 | D[0] | D[1] | D[2] | D[3] | D[4] | D[5] | D[6] | D[7] |
| MST_ID | ID|ERR<<4 | POS[15:8] | POS[7:0] | VEL[11:4] | VEL[3:0]|T[11:8] | T[7:0] | T_MOS | T_Rotor |

## Page 7

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
POS表示电机的位置信息
VEL表示电机的速度信息
T表示电机的扭矩信息
T_MOS表示驱动上MOS的平均温度，单位℃
T_Rotor表示电机内部线圈的平均温度，单位℃
位置、速度和扭矩采用线性映射的关系将浮点型数据转换成有符号的定点数据，其中位
置采用16位数据，速度和扭矩均使用12位。
 MIT 模式下控制帧
控制报文 D[0] D[1] D[2] D[3] D[4] D[5] D[6] D[7]
p_des p_des v_des v_des[3:0]| Kp Kd Kd[3:0]|
ID t_ff[7:0]
[15:8] [7:0] [11:4] Kp[11:8] [7:0] [11:4] t_ff[11:8]
帧ID等于设定的CANID值
P_des：位置给定
V_des：速度给定
Kp：位置比例系数
Kd：位置微分系数
T_ff：转矩给定值
各参数符合上一节的映射关系，其中p_des,v_des,t_ff的范围可由调试助手进行设定，
Kp的范围为[0,500]，Kd的范围为[0,5]。
标准CAN数据一帧只有8个字节，MIT的控制命令格式将Position、Velocity、Kp、Kd、
Torque五个参数按位组合在8个字节中。其中：Position占用2个字节16位、Velocity占用
12位、Kp占用12位、Kd占用12位。
 位置速度模式下控制帧
控制报文 D[0] D[1] D[2] D[3] D[4] D[5] D[6] D[7]
0x100+ID p_des v_des
帧ID为设定的CANID值加上0x100的偏移
P_des：位置给定，浮点型，低位在前，高位在后
V_des：速度给定，浮点型，低位在前，高位在后
此处发送命令的CANID是0x100+ID。速度给定是梯形加速度运行下最高速度的，即为
匀速段的速度值。
 速度模式下控制帧
控制报文 D[0] D[1] D[2] D[3]
0x200+ID v_des
第 7 页 共 9 页

---

### Table 1

| 控制报文 | D[0] | D[1] | D[2] | D[3] | D[4] | D[5] | D[6] | D[7] |
| ID | p_des
[15:8] | p_des
[7:0] | v_des
[11:4] | v_des[3:0]|
Kp[11:8] | Kp
[7:0] | Kd
[11:4] | Kd[3:0]|
t_ff[11:8] | t_ff[7:0] |

### Table 2

| 控制报文 | D[0] | D[1] | D[2] | D[3] | D[4] | D[5] | D[6] | D[7] |
| 0x100+ID | p_des |  |  |  | v_des |  |  |  |

### Table 3

| 控制报文 | D[0] | D[1] | D[2] | D[3] |
| 0x200+ID | v_des |  |  |  |

## Page 8

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
帧ID为设定的CANID值加上0x200的偏移
V_des：速度给定，浮点型，低位在前，高位在后
此处发送命令的CANID是0x200+ID。
使用达妙科技调试助手
使用达妙科技USB转CAN调试工具，连接电脑和电机，通过达妙科技助手对电机进
行参数设置以及固件升级。
电机调试串口通过 GH1.25 连接线-3pin 连接 PC，电机电源接口中 CAN 通信端子通过
XT30(2+2)-F插头连接线连接USB转CAN调试工具，通过达妙科技调试助手对电机进行参数
设置，以及固件升级等。
电机的串口、CAN口以及电源接口连通后，电脑端打开达妙科技调试助手，选择相应的串
口设备并打开串口。此时给电机供电，串口会打印信息，ControlMode指示当前驱动模式。
详细调试过程参考：调试助手使用说明书(达妙驱动控制协议)V1.4.pdf
下载链接：
https://gitee.com/kit-miao/damiao/tree/master/%E5%85%B3%E8%8A%82%E7%94%B5%E
6%9C%BA/%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE
特征参数
请根据以下参数合理使用电机。
类型 特征参数 DM-J4340-2EC（24V） DM-J4340-2EC（48V）
额定电压 24V 48V
额定电流 2.5A 2.5A
峰值电流 8A 8A
电机参数 额定扭矩 9NM 9NM
峰值扭矩 27NM 27NM
额定转速 36rpm 36rpm
空载最大转速 52rpm 100rpm
减速比 40: 1 40: 1
极对数 14 14
电机特征值
相电感 317uH 317uH
相电阻 760mΩ 760mΩ
外径 57mm 57mm
结构与重量 高度 53.3mm 53.3mm
电机重量 约362g 约362g
第 8 页 共 9 页

---

### Table 1

| 类型 | 特征参数 | DM-J4340-2EC（24V） | DM-J4340-2EC（48V） |
| 电机参数 | 额定电压 | 24V | 48V |
|  | 额定电流 | 2.5A | 2.5A |
|  | 峰值电流 | 8A | 8A |
|  | 额定扭矩 | 9NM | 9NM |
|  | 峰值扭矩 | 27NM | 27NM |
|  | 额定转速 | 36rpm | 36rpm |
|  | 空载最大转速 | 52rpm | 100rpm |
| 电机特征值 | 减速比 | 40: 1 | 40: 1 |
|  | 极对数 | 14 | 14 |
|  | 相电感 | 317uH | 317uH |
|  | 相电阻 | 760mΩ | 760mΩ |
| 结构与重量 | 外径 | 57mm | 57mm |
|  | 高度 | 53.3mm | 53.3mm |
|  | 电机重量 | 约362g | 约362g |

## Page 9

深圳市达妙科技有限公司 DM-J4340-2EC使用说明书V1.0
编码器位数 14位 14位
编码器 编码器个数 2 2
编码器类型 磁编（单圈） 磁编（单圈）
控制接口 CAN@1Mbps
通讯
调参接口 UART@921600bps
MIT模式
控制模式 速度模式
位置模式
驱动过温防护，防护温度：120℃，过温电机将退出
“使能模式”
电机过温防护，根据使用需求设定，建议不超过
100℃，过温电机将退出“使能模式”
电机过压防护，根据使用 电机过压防护，根据使用
需求设定，建议不超过 需求设定，建议不超过
控制与保护 32V，过压将退出“使能 52V，过压将退出“使能
模式” 模式”
保护
通讯丢失防护，设定周期内没有收到CAN指令将自动
退出“使能模式”
电机过流防护，根据使用需求设定，建议不超过
9.8A，过流将退出“使能模式”
电机欠压防护，若电源电 电机欠压防护，若电源电
压低于设定值，则退出 压低于设定值，则退出
“使能模式”，建议电源 “使能模式”，建议电源
电压不低于15V 电压不低于15V
第 9 页 共 9 页

---

### Table 1

| 编码器 | 编码器位数 | 14位 | 14位 |
|  | 编码器个数 | 2 | 2 |
|  | 编码器类型 | 磁编（单圈） | 磁编（单圈） |
| 通讯 | 控制接口 | CAN@1Mbps |  |
|  | 调参接口 | UART@921600bps |  |
| 控制与保护 | 控制模式 | MIT模式 |  |
|  |  | 速度模式 |  |
|  |  | 位置模式 |  |
|  | 保护 | 驱动过温防护，防护温度：120℃，过温电机将退出
“使能模式” |  |
|  |  | 电机过温防护，根据使用需求设定，建议不超过
100℃，过温电机将退出“使能模式” |  |
|  |  | 电机过压防护，根据使用
需求设定，建议不超过
32V，过压将退出“使能
模式” | 电机过压防护，根据使用
需求设定，建议不超过
52V，过压将退出“使能
模式” |
|  |  | 通讯丢失防护，设定周期内没有收到CAN指令将自动
退出“使能模式” |  |
|  |  | 电机过流防护，根据使用需求设定，建议不超过
9.8A，过流将退出“使能模式” |  |
|  |  | 电机欠压防护，若电源电
压低于设定值，则退出
“使能模式”，建议电源
电压不低于15V | 电机欠压防护，若电源电
压低于设定值，则退出
“使能模式”，建议电源
电压不低于15V |

